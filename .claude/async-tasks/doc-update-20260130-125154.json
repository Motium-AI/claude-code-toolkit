{
  "type": "doc-update",
  "created_at": "2026-01-30T12:51:54.860060+00:00",
  "status": "pending",
  "commit_message": "docs(forge): enhance platform-aware verification documentation\n\n- Added mobile checkpoint schema example with Maestro fields\n- Split checkpoint schema into Common/Web/Mobile field tables\n- Added Mobile Projects verification section with Maestro MCP examples\n- Updated Phase 2 to show platform-specific checklists\n- Updated comparison table with platform detection details\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
  "diff_content": "commit 7a5f777653f2a22e92c07541803412b478148e0b\nAuthor: olivier-motium <243932812+olivier-motium@users.noreply.github.com>\nDate:   Fri Jan 30 13:51:54 2026 +0100\n\n    docs(forge): enhance platform-aware verification documentation\n    \n    - Added mobile checkpoint schema example with Maestro fields\n    - Split checkpoint schema into Common/Web/Mobile field tables\n    - Added Mobile Projects verification section with Maestro MCP examples\n    - Updated Phase 2 to show platform-specific checklists\n    - Updated comparison table with platform detection details\n    \n    Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n---\n config/skills/forge/SKILL.md | 108 ++++++++++++++++++++++++++++++++-----------\n 1 file changed, 81 insertions(+), 27 deletions(-)\n\ndiff --git a/config/skills/forge/SKILL.md b/config/skills/forge/SKILL.md\nindex 4a0dfb8..1ce56fb 100644\n--- a/config/skills/forge/SKILL.md\n+++ b/config/skills/forge/SKILL.md\n@@ -20,7 +20,8 @@ This workflow uses a **deterministic boolean checkpoint** to enforce completion:\n \u2502                                                                  \u2502\n \u2502  Check booleans deterministically:                               \u2502\n \u2502    - is_job_complete: false \u2192 BLOCKED                            \u2502\n-\u2502    - web_testing_done: false \u2192 BLOCKED                           \u2502\n+\u2502    - web_testing_done: false (web projects) \u2192 BLOCKED            \u2502\n+\u2502    - maestro_tests_passed: false (mobile projects) \u2192 BLOCKED     \u2502\n \u2502    - deployed: false (if code changed) \u2192 BLOCKED                 \u2502\n \u2502    - linters_pass: false (if code changed) \u2192 BLOCKED             \u2502\n \u2502    - what_remains not empty \u2192 BLOCKED                            \u2502\n@@ -119,26 +120,24 @@ TEST_PASSWORD=your-test-password\n \n Before stopping, you MUST create `.claude/completion-checkpoint.json`:\n \n+### Web Projects\n+\n ```json\n {\n   \"self_report\": {\n     \"code_changes_made\": true,\n     \"web_testing_done\": true,\n     \"web_testing_done_at_version\": \"abc1234\",\n-    \"api_testing_done\": true,\n     \"deployed\": true,\n     \"deployed_at_version\": \"abc1234\",\n     \"console_errors_checked\": true,\n-    \"console_errors_checked_at_version\": \"abc1234\",\n     \"linters_pass\": true,\n     \"linters_pass_at_version\": \"abc1234\",\n-    \"preexisting_issues_fixed\": true,\n     \"is_job_complete\": true\n   },\n   \"reflection\": {\n     \"what_was_done\": \"Implemented feature X, deployed to staging, verified in browser\",\n-    \"what_remains\": \"none\",\n-    \"blockers\": null\n+    \"what_remains\": \"none\"\n   },\n   \"evidence\": {\n     \"urls_tested\": [\"https://staging.example.com/feature\"],\n@@ -147,17 +146,57 @@ Before stopping, you MUST create `.claude/completion-checkpoint.json`:\n }\n ```\n \n+### Mobile Projects\n+\n+```json\n+{\n+  \"self_report\": {\n+    \"code_changes_made\": true,\n+    \"maestro_mcp_used\": true,\n+    \"full_journeys_validated\": true,\n+    \"maestro_tests_passed\": true,\n+    \"maestro_tests_passed_at_version\": \"abc1234\",\n+    \"linters_pass\": true,\n+    \"linters_pass_at_version\": \"abc1234\",\n+    \"is_job_complete\": true\n+  },\n+  \"reflection\": {\n+    \"what_was_done\": \"Fixed auth guard, verified via Maestro E2E\",\n+    \"what_remains\": \"none\"\n+  },\n+  \"evidence\": {\n+    \"mcp_tools_used\": [\"mcp__maestro__run_flow\", \"mcp__maestro__hierarchy\"],\n+    \"maestro_flows_tested\": [\"J2-returning-user-login.yaml\", \"J3-main-app-navigation.yaml\"],\n+    \"platform\": \"ios\"\n+  }\n+}\n+```\n+\n+### Common Fields\n+\n | Field | Type | Required | Meaning |\n |-------|------|----------|---------|\n | `code_changes_made` | bool | yes | Were any code files modified? |\n-| `web_testing_done` | bool | yes | Did you verify in a real browser? |\n-| `deployed` | bool | conditional | Did you deploy the changes? |\n-| `console_errors_checked` | bool | yes | Did you check browser console? |\n | `linters_pass` | bool | if code changed | Did all linters pass with zero errors? |\n-| `preexisting_issues_fixed` | bool | if code changed | Did you fix ALL issues (no excuses)? |\n | `is_job_complete` | bool | yes | **Critical** - Is the job ACTUALLY done? |\n | `what_remains` | string | yes | Must be \"none\" to allow stop |\n \n+### Web-Specific Fields\n+\n+| Field | Type | Required | Meaning |\n+|-------|------|----------|---------|\n+| `web_testing_done` | bool | yes | Did you verify in a real browser? |\n+| `deployed` | bool | conditional | Did you deploy the changes? |\n+| `console_errors_checked` | bool | yes | Did you check browser console? |\n+\n+### Mobile-Specific Fields\n+\n+| Field | Type | Required | Meaning |\n+|-------|------|----------|---------|\n+| `maestro_mcp_used` | bool | yes | Did you use Maestro MCP tools (not bash)? |\n+| `full_journeys_validated` | bool | yes | Did you run complete user journeys (J2+J3)? |\n+| `maestro_tests_passed` | bool | yes | Did all Maestro E2E tests pass? |\n+\n ## Workflow\n \n ```\n@@ -511,9 +550,11 @@ gh workflow run deploy.yml -f environment=staging\n gh run watch --exit-status\n ```\n \n-## Phase 2: Verification (MANDATORY)\n+## Phase 2: Verification (MANDATORY - Platform-Aware)\n \n-### CRITICAL: Use Surf CLI First, Not Chrome MCP\n+**The validator auto-detects your platform and enforces appropriate testing.**\n+\n+### Web Projects: Surf CLI / Chrome MCP\n \n **DO NOT call Chrome MCP tools (mcp__claude-in-chrome__*) for verification.**\n \n@@ -530,36 +571,45 @@ python3 ~/.claude/hooks/surf-verify.py --urls \"https://staging.example.com/featu\n cat .claude/web-smoke/summary.json\n ```\n \n+**Fallback: Chrome MCP** (only if Surf CLI unavailable):\n ```\n-CORRECT:\n-1. Run surf-verify.py first\n-2. Only if Surf fails \u2192 Fall back to Chrome MCP\n-\n-WRONG:\n-- Calling mcp__claude-in-chrome__tabs_context as first step\n-- Using Chrome MCP \"because it's easier\"\n-- Skipping Surf without trying it\n+- mcp__claude-in-chrome__navigate to the app URL\n+- mcp__claude-in-chrome__computer action=screenshot\n+- mcp__claude-in-chrome__read_console_messages\n ```\n \n-### Fallback: Chrome MCP (ONLY if Surf CLI unavailable)\n+### Mobile Projects: Maestro MCP\n \n-**Only use Chrome MCP if Surf CLI is not installed or surf-verify.py fails.**\n+**If the project contains `app.json`, `eas.json`, or `ios/`/`android/` directories, you MUST use Maestro MCP.**\n \n ```\n-- mcp__claude-in-chrome__navigate to the app URL\n-- mcp__claude-in-chrome__computer action=screenshot\n-- mcp__claude-in-chrome__read_console_messages\n+# Minimum required journeys\n+mcp__maestro__run_flow(flow: \".maestro/journeys/J2-returning-user-login.yaml\")\n+mcp__maestro__run_flow(flow: \".maestro/journeys/J3-main-app-navigation.yaml\")\n+\n+# Create artifacts\n+mkdir -p .claude/maestro-smoke\n+# Maestro MCP auto-saves screenshots and summary\n ```\n \n-When using Chrome MCP fallback, you MUST manually create `.claude/web-smoke/summary.json`.\n+**DO NOT use bash `maestro test` commands.** Always use Maestro MCP tools.\n \n ### Verification Checklist\n+\n+**Web Projects:**\n - [ ] Surf CLI tried first (or documented why not)\n - [ ] Navigate to actual app (not just /health)\n - [ ] Screenshot captured showing feature works\n - [ ] Console has ZERO errors\n - [ ] Data actually displays (not spinner)\n \n+**Mobile Projects:**\n+- [ ] Maestro MCP tools used (not bash commands)\n+- [ ] Full journeys validated (J2 + J3 minimum)\n+- [ ] Screenshots captured via MCP\n+- [ ] All flows passing\n+- [ ] Artifacts in .claude/maestro-smoke/\n+\n ## Phase 3: Complete\n \n Update checkpoint and try to stop. If blocked, address the issues and try again.\n@@ -622,11 +672,15 @@ rm -f ~/.claude/forge-state.json .claude/forge-state.json\n | Log collection phase | No | Yes |\n | Service topology | Not required | Required |\n | Linter policy | Strict | Strict |\n-| Browser verification | Required | Required |\n+| Platform detection | Auto (web vs mobile) | Auto (web vs mobile) |\n+| Web verification | Surf CLI + Chrome MCP | Surf CLI + Chrome MCP |\n+| Mobile verification | Maestro MCP | Maestro MCP |\n | Completion checkpoint | Same schema | Same schema |\n \n `/forge` is the universal base skill. `/appfix` is a debugging specialization that adds diagnostic phases.\n \n+Both skills now auto-detect mobile proje\n\n... [truncated - diff too long]",
  "existing_docs": [
    "docs/architecture.md",
    "docs/index.md",
    "docs/philosophy.md",
    "README.md",
    ".claude/MEMORIES.md"
  ],
  "instructions": "\nDOCUMENTATION UPDATE TASK\n\nA commit was just made in an appfix/godo session. Your job is to:\n\n1. Analyze the diff to understand what changed\n2. Determine which documentation files need updating\n3. Update the relevant docs to reflect the changes\n\nCOMMIT MESSAGE:\ndocs(forge): enhance platform-aware verification documentation\n\n- Added mobile checkpoint schema example with Maestro fields\n- Split checkpoint schema into Common/Web/Mobile field tables\n- Added Mobile Projects verification section with Maestro MCP examples\n- Updated Phase 2 to show platform-specific checklists\n- Updated comparison table with platform detection details\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n\nEXISTING DOCUMENTATION FILES:\n- docs/architecture.md\n- docs/index.md\n- docs/philosophy.md\n- README.md\n- .claude/MEMORIES.md\n\nDIFF CONTENT:\ncommit 7a5f777653f2a22e92c07541803412b478148e0b\nAuthor: olivier-motium <243932812+olivier-motium@users.noreply.github.com>\nDate:   Fri Jan 30 13:51:54 2026 +0100\n\n    docs(forge): enhance platform-aware verification documentation\n    \n    - Added mobile checkpoint schema example with Maestro fields\n    - Split checkpoint schema into Common/Web/Mobile field tables\n    - Added Mobile Projects verification section with Maestro MCP examples\n    - Updated Phase 2 to show platform-specific checklists\n    - Updated comparison table with platform detection details\n    \n    Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n---\n config/skills/forge/SKILL.md | 108 ++++++++++++++++++++++++++++++++-----------\n 1 file changed, 81 insertions(+), 27 deletions(-)\n\ndiff --git a/config/skills/forge/SKILL.md b/config/skills/forge/SKILL.md\nindex 4a0dfb8..1ce56fb 100644\n--- a/config/skills/forge/SKILL.md\n+++ b/config/skills/forge/SKILL.md\n@@ -20,7 +20,8 @@ This workflow uses a **deterministic boolean checkpoint** to enforce completion:\n \u2502                                                                  \u2502\n \u2502  Check booleans deterministically:                               \u2502\n \u2502    - is_job_complete: false \u2192 BLOCKED                            \u2502\n-\u2502    - web_testing_done: false \u2192 BLOCKED                           \u2502\n+\u2502    - web_testing_done: false (web projects) \u2192 BLOCKED            \u2502\n+\u2502    - maestro_tests_passed: false (mobile projects) \u2192 BLOCKED     \u2502\n \u2502    - deployed: false (if code changed) \u2192 BLOCKED                 \u2502\n \u2502    - linters_pass: false (if code changed) \u2192 BLOCKED             \u2502\n \u2502    - what_remains not empty \u2192 BLOCKED                            \u2502\n@@ -119,26 +120,24 @@ TEST_PASSWORD=your-test-password\n \n Before stopping, you MUST create `.claude/completion-checkpoint.json`:\n \n+### Web Projects\n+\n ```json\n {\n   \"self_report\": {\n     \"code_changes_made\": true,\n     \"web_testing_done\": true,\n     \"web_testing_done_at_version\": \"abc1234\",\n-    \"api_testing_done\": true,\n     \"deployed\": true,\n     \"deployed_at_version\": \"abc1234\",\n     \"console_errors_checked\": true,\n-    \"console_errors_checked_at_version\": \"abc1234\",\n     \"linters_pass\": true,\n     \"linters_pass_at_version\": \"abc1234\",\n-    \"preexisting_issues_fixed\": true,\n     \"is_job_complete\": true\n   },\n   \"reflection\": {\n     \"what_was_done\": \"Implemented feature X, deployed to staging, verified in browser\",\n-    \"what_remains\": \"none\",\n-    \"blockers\": null\n+    \"what_remains\": \"none\"\n   },\n   \"evidence\": {\n     \"urls_tested\": [\"https://staging.example.com/feature\"],\n@@ -147,17 +146,57 @@ Before stopping, you MUST create `.claude/completion-checkpoint.json`:\n }\n ```\n \n+### Mobile Projects\n+\n+```json\n+{\n+  \"self_report\": {\n+    \"code_changes_made\": true,\n+    \"maestro_mcp_used\": true,\n+    \"full_journeys_validated\": true,\n+    \"maestro_tests_passed\": true,\n+    \"maestro_tests_passed_at_version\": \"abc1234\",\n+    \"linters_pass\": true,\n+    \"linters_pass_at_version\": \"abc1234\",\n+    \"is_job_complete\": true\n+  },\n+  \"reflection\": {\n+    \"what_was_done\": \"Fixed auth guard, verified via Maestro E2E\",\n+    \"what_remains\": \"none\"\n+  },\n+  \"evidence\": {\n+    \"mcp_tools_used\": [\"mcp__maestro__run_flow\", \"mcp__maestro__hierarchy\"],\n+    \"maestro_flows_tested\": [\"J2-returning-user-login.yaml\", \"J3-main-app-navigation.yaml\"],\n+    \"platform\": \"ios\"\n+  }\n+}\n+```\n+\n+### Common Fields\n+\n | Field | Type | Required | Meaning |\n |-------|------|----------|---------|\n | `code_changes_made` | bool | yes | Were any code files modified? |\n-| `web_testing_done` | bool | yes | Did you verify in a real browser? |\n-| `deployed` | bool | conditional | Did you deploy the changes? |\n-| `console_errors_checked` | bool | yes | Did you check browser console? |\n | `linters_pass` | bool | if code changed | Did all linters pass with zero errors? |\n-| `preexisting_issues_fixed` | bool | if code changed | Did you fix ALL issues (no excuses)? |\n | `is_job_complete` | bool | yes | **Critical** - Is the job ACTUALLY done? |\n | `what_remains` | string | yes | Must be \"none\" to allow stop |\n \n+### Web-Specific Fields\n+\n+| Field | Type | Required | Meaning |\n+|-------|------|----------|---------|\n+| `web_testing_done` | bool | yes | Did you verify in a real browser? |\n+| `deployed` | bool | conditional | Did you deploy the changes? |\n+| `console_errors_checked` | bool | yes | Did you check browser console? |\n+\n+### Mobile-Specific Fields\n+\n+| Field | Type | Required | Meaning |\n+|-------|------|----------|---------|\n+| `maestro_mcp_used` | bool | yes | Did you use Maestro MCP tools (not bash)? |\n+| `full_journeys_validated` | bool | yes | Did you run complete user journeys (J2+J3)? |\n+| `maestro_tests_passed` | bool | yes | Did all Maestro E2E tests pass? |\n+\n ## Workflow\n \n ```\n@@ -511,9 +550,11 @@ gh workflow run deploy.yml -f environment=staging\n gh run watch --exit-status\n ```\n \n-## Phase 2: Verification (MANDATORY)\n+## Phase 2: Verification (MANDATORY - Platform-Aware)\n \n-### CRITICAL: Use Surf CLI First, Not Chrome MCP\n+**The validator auto-detects your platform and enforces appropriate testing.**\n+\n+### Web Projects: Surf CLI / Chrome MCP\n \n **DO NOT call Chrome MCP tools (mcp__claude-in-chrome__*) for verification.**\n \n@@ -530,36 +571,45 @@ python3 ~/.claude/hooks/surf-verify.py --urls \"https://staging.example.com/featu\n cat .claude/web-smoke/summary.json\n ```\n \n+**Fallback: Chrome MCP** (only if Surf CLI unavailable):\n ```\n-CORRECT:\n-1. Run surf-verify.py first\n-2. Only if Surf fails \u2192 Fall back to Chrome MCP\n-\n-WRONG:\n-- Calling mcp__claude-in-chrome__tabs_context as first step\n-- Using Chrome MCP \"because it's easier\"\n-- Skipping Surf without trying it\n+- mcp__claude-in-chrome__navigate to the app URL\n+- mcp__claude-in-chrome__computer action=screenshot\n+- mcp__claude-in-chrome__read_console_messages\n ```\n \n-### Fallback: Chrome MCP (ONLY if Surf CLI unavailable)\n+### Mobile Projects: Maestro MCP\n \n-**Only use Chrome MCP if Surf CLI is not installed or surf-verify.py fails.**\n+**If the project contains `app.json`, `eas.json`, or `ios/`/`android/` directories, you MUST use Maestro MCP.**\n \n ```\n-- mcp__claude-in-chrome__navigate to the app URL\n-- mcp__claude-in-chrome__computer action=screenshot\n-- mcp__claude-in-chrome__read_console_messages\n+# Minimum required journeys\n+mcp__maestro__run_flow(flow: \".maestro/journeys/J2-returning-user-login.yaml\")\n+mcp__maestro__run_flow(flow: \".maestro/journeys/J3-main-app-navigation.yaml\")\n+\n+# Create artifacts\n+mkdir -p .claude/maestro-smoke\n+# Maestro MCP auto-saves screenshots and summary\n ```\n \n-When using Chrome MCP fallback, you MUST manually create `.claude/web-smoke/summary.json`.\n+**DO NOT use bash `maestro test` commands.** Always use Maestro MCP tools.\n \n ### Verification Checklist\n+\n+**Web Projects:**\n - [ ] Surf CLI tried first (or documented why not)\n - [ ] Navigate to actual app (not just /health)\n - [ ] Screenshot captured showing feature works\n - [ ] Console has ZERO errors\n - [ ] Data actually displays (not spinner)\n \n+**Mobile Projects:**\n+- [ ] Maestro MCP tools used (not bash commands)\n+- [ ] Full journeys validated (J2 + J3 minimum)\n+- [ ] Screenshots captured via MCP\n+- [ ] All flows passing\n+- [ ] Artifacts in .claude/maestro-smoke/\n+\n ## Phase 3: Complete\n \n Update checkpoint and try to stop. If blocked, address the issues and try again.\n@@ -622,11 +672,15 @@ rm -f ~/.claude/forge-state.json .claude/forge-state.json\n | Log collection phase | No | Yes |\n | Service topology | Not required | Required |\n | Linter policy | Strict | Strict |\n-| Browser verification | Required | Required |\n+| Platform detection | Auto (web vs mobile) | Auto (web vs mobile) |\n+| Web verification | Surf CLI + Chrome MCP | Surf CLI + Chrome MCP |\n+| Mobile verification | Maestro MCP | Maestro MCP |\n | Completion checkpoint | Same schema | Same schema |\n \n `/forge` is the universal base skill. `/appfix` is a debugging specialization that adds diagnostic phases.\n \n+Both skills now auto-detect mobile proje\n\n... [truncated - diff too long]\n\nINSTRUCTIONS:\n- Only update docs that are actually affected by this change\n- Keep updates concise and accurate\n- Don't add unnecessary documentation\n- If the change is purely code (no architectural/API changes), you may skip doc updates\n- Focus on: API changes, new features, architectural decisions, configuration changes\n\nUse the /heavy skill if you need multiple perspectives on what to document.\n"
}