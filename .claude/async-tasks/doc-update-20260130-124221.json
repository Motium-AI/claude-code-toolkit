{
  "type": "doc-update",
  "created_at": "2026-01-30T12:42:21.409018+00:00",
  "status": "pending",
  "commit_message": "feat(forge): upgrade Lite Heavy planning from 2 to 4 agents\n\n- Update workflow diagram to show 4 parallel agents\n- Add 2 dynamic agents (task-specific) alongside 2 required agents\n- Add dynamic agent generation guidance with examples\n- Update synthesis section to include all 4 perspectives\n- Rewrite \"Why These 2 Agents?\" as \"Why 4 Agents?\" with rationale\n- Update comparison table to reflect 4 agents\n- Update docs/index.md quick reference\n\nThe 2 required agents (First Principles + AGI-Pilled) remain hook-enforced.\nThe 2 dynamic agents are guided by documentation only.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
  "diff_content": "commit 52e5251f5d44328fea6a32fb19bab476d0edc0d2\nAuthor: olivier-motium <243932812+olivier-motium@users.noreply.github.com>\nDate:   Fri Jan 30 13:42:21 2026 +0100\n\n    feat(forge): upgrade Lite Heavy planning from 2 to 4 agents\n    \n    - Update workflow diagram to show 4 parallel agents\n    - Add 2 dynamic agents (task-specific) alongside 2 required agents\n    - Add dynamic agent generation guidance with examples\n    - Update synthesis section to include all 4 perspectives\n    - Rewrite \"Why These 2 Agents?\" as \"Why 4 Agents?\" with rationale\n    - Update comparison table to reflect 4 agents\n    - Update docs/index.md quick reference\n    \n    The 2 required agents (First Principles + AGI-Pilled) remain hook-enforced.\n    The 2 dynamic agents are guided by documentation only.\n    \n    Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n---\n config/skills/forge/SKILL.md | 79 ++++++++++++++++++++++++++++++++------------\n docs/index.md                |  2 +-\n 2 files changed, 58 insertions(+), 23 deletions(-)\n\ndiff --git a/config/skills/forge/SKILL.md b/config/skills/forge/SKILL.md\nindex 4365986..ec6f920 100644\n--- a/config/skills/forge/SKILL.md\n+++ b/config/skills/forge/SKILL.md\n@@ -150,9 +150,10 @@ Before stopping, you MUST create `.claude/completion-checkpoint.json`:\n \u2502  \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557  \u2502\n \u2502  \u2551  PHASE 0.5: LITE HEAVY PLANNING (MANDATORY)               \u2551  \u2502\n \u2502  \u2551     \u2514\u2500\u25ba EnterPlanMode                                     \u2551  \u2502\n-\u2502  \u2551     \u2514\u2500\u25ba Launch 2 parallel Opus agents (from /heavy):      \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba Launch 4 parallel Opus agents:                    \u2551  \u2502\n \u2502  \u2551         \u251c\u2500\u25ba First Principles: \"What can be deleted?\"      \u2551  \u2502\n-\u2502  \u2551         \u2514\u2500\u25ba AGI-Pilled: \"What would god-tier AI do?\"      \u2551  \u2502\n+\u2502  \u2551         \u251c\u2500\u25ba AGI-Pilled: \"What would god-tier AI do?\"      \u2551  \u2502\n+\u2502  \u2551         \u2514\u2500\u25ba 2 Dynamic: Generated based on the task        \u2551  \u2502\n \u2502  \u2551     \u2514\u2500\u25ba Synthesize tradeoffs + write plan                 \u2551  \u2502\n \u2502  \u2551     \u2514\u2500\u25ba ExitPlanMode                                      \u2551  \u2502\n \u2502  \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d  \u2502\n@@ -233,11 +234,11 @@ EOF\n \n ## Phase 0.5: Lite Heavy Planning (MANDATORY)\n \n-**This phase is REQUIRED before making any changes. It combines codebase exploration with 2-agent analysis for optimal planning.**\n+**This phase is REQUIRED before making any changes. It combines codebase exploration with 4-agent analysis for optimal planning.**\n \n ### Overview\n \n-Lite Heavy is a streamlined version of `/heavy` that provides multi-perspective analysis in a single round. It uses `/heavy`'s **First Principles** and **AGI-Pilled** agents (the 2 required agents from heavy) to ensure you don't over-engineer or under-simplify.\n+Lite Heavy is a streamlined version of `/heavy` that provides multi-perspective analysis in a single round. It uses **4 agents**: `/heavy`'s **First Principles** and **AGI-Pilled** (2 required, hook-enforced) plus **2 dynamic agents** generated based on the specific task. This ensures you don't over-engineer, under-simplify, AND catches task-specific blind spots.\n \n ### Workflow\n \n@@ -250,19 +251,29 @@ Lite Heavy is a streamlined version of `/heavy` that provides multi-perspective\n    - Relevant code patterns for the task\n    - Existing tests and validation\n \n-3. **Read `/heavy` agent prompts**:\n+3. **Read `/heavy` agent prompts and generate dynamic perspectives**:\n \n    **CRITICAL**: Read `~/.claude/skills/heavy/SKILL.md` to get the exact prompts for:\n    - **REQUIRED AGENT 1: First Principles** (Elon Musk approach)\n    - **REQUIRED AGENT 2: AGI-Pilled** (maximally capable AI assumption)\n+   - **DYNAMIC AGENT TEMPLATE** (lines 346-391 in heavy/SKILL.md)\n \n-   Do NOT use custom prompts. Use heavy's exact prompts to maintain consistency.\n+   **Generate 2 dynamic perspectives** by asking:\n+   > \"For THIS task, who would argue about it at a company meeting? Pick 2 perspectives that catch what First Principles and AGI-Pilled might miss.\"\n \n-4. **Launch 2 parallel Opus agents in a SINGLE message**:\n+   | Task Type | Example Dynamic Agent 1 | Example Dynamic Agent 2 |\n+   |-----------|------------------------|------------------------|\n+   | Auth feature | Security Engineer | API Consumer |\n+   | UI component | UX Designer | Accessibility Expert |\n+   | DB migration | DBA | Application Developer |\n+   | API design | Frontend Consumer | External Partner |\n+\n+4. **Launch 4 parallel Opus agents in a SINGLE message**:\n \n    Using the prompts read from heavy/SKILL.md:\n \n    ```\n+   // 2 REQUIRED AGENTS (hook-enforced)\n    Task(\n      subagent_type=\"general-purpose\",\n      description=\"First Principles Analysis\",\n@@ -276,16 +287,33 @@ Lite Heavy is a streamlined version of `/heavy` that provides multi-perspective\n      model=\"opus\",\n      prompt=\"[PASTE HEAVY'S AGI-PILLED PROMPT with TASK and CODEBASE CONTEXT filled in]\"\n    )\n+\n+   // 2 DYNAMIC AGENTS (task-specific)\n+   Task(\n+     subagent_type=\"general-purpose\",\n+     description=\"[DYNAMIC PERSPECTIVE 1] perspective\",\n+     model=\"opus\",\n+     prompt=\"[PASTE HEAVY'S DYNAMIC AGENT TEMPLATE with ROLE and TASK filled in]\"\n+   )\n+\n+   Task(\n+     subagent_type=\"general-purpose\",\n+     description=\"[DYNAMIC PERSPECTIVE 2] perspective\",\n+     model=\"opus\",\n+     prompt=\"[PASTE HEAVY'S DYNAMIC AGENT TEMPLATE with ROLE and TASK filled in]\"\n+   )\n    ```\n \n 5. **Synthesize the agents' responses**:\n \n-After both agents return, synthesize their insights:\n+After all 4 agents return, synthesize their insights:\n \n ```\n TRADEOFF: [topic]\n - First Principles: Delete X because [reason]\n - AGI-Pilled: Expand Y because [capability argument]\n+- [Dynamic 1]: Consider Z because [domain expertise]\n+- [Dynamic 2]: Watch out for W because [specific risk]\n - Resolution: [chosen approach with rationale]\n ```\n \n@@ -297,23 +325,30 @@ TRADEOFF: [topic]\n \n 7. **Call `ExitPlanMode`**\n \n-### Why These 2 Agents?\n+### Why 4 Agents?\n+\n+Lite Heavy uses **4 agents** to cover both universal tensions and task-specific blind spots:\n \n-Lite Heavy uses `/heavy`'s two **required** agents because they represent complementary forces:\n+| Agent Type | Force | Key Question | Enforcement |\n+|------------|-------|--------------|-------------|\n+| **First Principles** | Simplification | \"What can be deleted?\" | Hook-enforced |\n+| **AGI-Pilled** | Capability | \"What would god-tier AI do?\" | Hook-enforced |\n+| **Dynamic 1** | Domain expertise | \"What does [expert] see?\" | Documentation |\n+| **Dynamic 2** | Adversarial review | \"What could go wrong?\" | Documentation |\n \n-| Agent | Force | Key Question |\n-|-------|-------|--------------|\n-| **First Principles** | Simplification | \"What can be deleted? What's over-engineered?\" |\n-| **AGI-Pilled** | Capability | \"What would god-tier AI implementation look like?\" |\n+| Problem | Which Agent Catches It |\n+|---------|----------------------|\n+| Over-engineering | First Principles |\n+| Under-ambition | AGI-Pilled |\n+| Domain-specific pitfalls | Dynamic (domain expert) |\n+| Implementation flaws | Dynamic (adversarial) |\n \n-| Without Lite Heavy | With Lite Heavy |\n-|-------------------|-----------------|\n-| Over-engineering | First Principles asks \"delete this?\" |\n-| Under-ambition | AGI-Pilled asks \"why constrain the model?\" |\n-| Scope creep | First Principles enforces simplicity |\n-| Conservative design | AGI-Pilled pushes for intelligence-maximizing |\n+**Why 4 agents instead of 2?**\n+- 2 agents = 1 pairwise tension (simplify vs expand)\n+- 4 agents = 6 pairwise tensions (each perspective challenges 3 others)\n+- Planning tokens << execution tokens \u2014 better planning = fewer fix-verify iterations\n \n-**Why only 2 agents?** More agents add latency without proportional value for implementation planning. `/heavy` uses 5+ agents for strategic questions; `/forge` uses the 2 required agents for execution planning.\n+**Hook enforcement**: Only the 2 required agents are hook-enforced. Dynamic agents are guided by documentation \u2014 the hooks enforce\n\n... [truncated - diff too long]",
  "existing_docs": [
    "docs/architecture.md",
    "docs/index.md",
    "docs/philosophy.md",
    "README.md",
    ".claude/MEMORIES.md"
  ],
  "instructions": "\nDOCUMENTATION UPDATE TASK\n\nA commit was just made in an appfix/godo session. Your job is to:\n\n1. Analyze the diff to understand what changed\n2. Determine which documentation files need updating\n3. Update the relevant docs to reflect the changes\n\nCOMMIT MESSAGE:\nfeat(forge): upgrade Lite Heavy planning from 2 to 4 agents\n\n- Update workflow diagram to show 4 parallel agents\n- Add 2 dynamic agents (task-specific) alongside 2 required agents\n- Add dynamic agent generation guidance with examples\n- Update synthesis section to include all 4 perspectives\n- Rewrite \"Why These 2 Agents?\" as \"Why 4 Agents?\" with rationale\n- Update comparison table to reflect 4 agents\n- Update docs/index.md quick reference\n\nThe 2 required agents (First Principles + AGI-Pilled) remain hook-enforced.\nThe 2 dynamic agents are guided by documentation only.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n\nEXISTING DOCUMENTATION FILES:\n- docs/architecture.md\n- docs/index.md\n- docs/philosophy.md\n- README.md\n- .claude/MEMORIES.md\n\nDIFF CONTENT:\ncommit 52e5251f5d44328fea6a32fb19bab476d0edc0d2\nAuthor: olivier-motium <243932812+olivier-motium@users.noreply.github.com>\nDate:   Fri Jan 30 13:42:21 2026 +0100\n\n    feat(forge): upgrade Lite Heavy planning from 2 to 4 agents\n    \n    - Update workflow diagram to show 4 parallel agents\n    - Add 2 dynamic agents (task-specific) alongside 2 required agents\n    - Add dynamic agent generation guidance with examples\n    - Update synthesis section to include all 4 perspectives\n    - Rewrite \"Why These 2 Agents?\" as \"Why 4 Agents?\" with rationale\n    - Update comparison table to reflect 4 agents\n    - Update docs/index.md quick reference\n    \n    The 2 required agents (First Principles + AGI-Pilled) remain hook-enforced.\n    The 2 dynamic agents are guided by documentation only.\n    \n    Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n---\n config/skills/forge/SKILL.md | 79 ++++++++++++++++++++++++++++++++------------\n docs/index.md                |  2 +-\n 2 files changed, 58 insertions(+), 23 deletions(-)\n\ndiff --git a/config/skills/forge/SKILL.md b/config/skills/forge/SKILL.md\nindex 4365986..ec6f920 100644\n--- a/config/skills/forge/SKILL.md\n+++ b/config/skills/forge/SKILL.md\n@@ -150,9 +150,10 @@ Before stopping, you MUST create `.claude/completion-checkpoint.json`:\n \u2502  \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557  \u2502\n \u2502  \u2551  PHASE 0.5: LITE HEAVY PLANNING (MANDATORY)               \u2551  \u2502\n \u2502  \u2551     \u2514\u2500\u25ba EnterPlanMode                                     \u2551  \u2502\n-\u2502  \u2551     \u2514\u2500\u25ba Launch 2 parallel Opus agents (from /heavy):      \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba Launch 4 parallel Opus agents:                    \u2551  \u2502\n \u2502  \u2551         \u251c\u2500\u25ba First Principles: \"What can be deleted?\"      \u2551  \u2502\n-\u2502  \u2551         \u2514\u2500\u25ba AGI-Pilled: \"What would god-tier AI do?\"      \u2551  \u2502\n+\u2502  \u2551         \u251c\u2500\u25ba AGI-Pilled: \"What would god-tier AI do?\"      \u2551  \u2502\n+\u2502  \u2551         \u2514\u2500\u25ba 2 Dynamic: Generated based on the task        \u2551  \u2502\n \u2502  \u2551     \u2514\u2500\u25ba Synthesize tradeoffs + write plan                 \u2551  \u2502\n \u2502  \u2551     \u2514\u2500\u25ba ExitPlanMode                                      \u2551  \u2502\n \u2502  \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d  \u2502\n@@ -233,11 +234,11 @@ EOF\n \n ## Phase 0.5: Lite Heavy Planning (MANDATORY)\n \n-**This phase is REQUIRED before making any changes. It combines codebase exploration with 2-agent analysis for optimal planning.**\n+**This phase is REQUIRED before making any changes. It combines codebase exploration with 4-agent analysis for optimal planning.**\n \n ### Overview\n \n-Lite Heavy is a streamlined version of `/heavy` that provides multi-perspective analysis in a single round. It uses `/heavy`'s **First Principles** and **AGI-Pilled** agents (the 2 required agents from heavy) to ensure you don't over-engineer or under-simplify.\n+Lite Heavy is a streamlined version of `/heavy` that provides multi-perspective analysis in a single round. It uses **4 agents**: `/heavy`'s **First Principles** and **AGI-Pilled** (2 required, hook-enforced) plus **2 dynamic agents** generated based on the specific task. This ensures you don't over-engineer, under-simplify, AND catches task-specific blind spots.\n \n ### Workflow\n \n@@ -250,19 +251,29 @@ Lite Heavy is a streamlined version of `/heavy` that provides multi-perspective\n    - Relevant code patterns for the task\n    - Existing tests and validation\n \n-3. **Read `/heavy` agent prompts**:\n+3. **Read `/heavy` agent prompts and generate dynamic perspectives**:\n \n    **CRITICAL**: Read `~/.claude/skills/heavy/SKILL.md` to get the exact prompts for:\n    - **REQUIRED AGENT 1: First Principles** (Elon Musk approach)\n    - **REQUIRED AGENT 2: AGI-Pilled** (maximally capable AI assumption)\n+   - **DYNAMIC AGENT TEMPLATE** (lines 346-391 in heavy/SKILL.md)\n \n-   Do NOT use custom prompts. Use heavy's exact prompts to maintain consistency.\n+   **Generate 2 dynamic perspectives** by asking:\n+   > \"For THIS task, who would argue about it at a company meeting? Pick 2 perspectives that catch what First Principles and AGI-Pilled might miss.\"\n \n-4. **Launch 2 parallel Opus agents in a SINGLE message**:\n+   | Task Type | Example Dynamic Agent 1 | Example Dynamic Agent 2 |\n+   |-----------|------------------------|------------------------|\n+   | Auth feature | Security Engineer | API Consumer |\n+   | UI component | UX Designer | Accessibility Expert |\n+   | DB migration | DBA | Application Developer |\n+   | API design | Frontend Consumer | External Partner |\n+\n+4. **Launch 4 parallel Opus agents in a SINGLE message**:\n \n    Using the prompts read from heavy/SKILL.md:\n \n    ```\n+   // 2 REQUIRED AGENTS (hook-enforced)\n    Task(\n      subagent_type=\"general-purpose\",\n      description=\"First Principles Analysis\",\n@@ -276,16 +287,33 @@ Lite Heavy is a streamlined version of `/heavy` that provides multi-perspective\n      model=\"opus\",\n      prompt=\"[PASTE HEAVY'S AGI-PILLED PROMPT with TASK and CODEBASE CONTEXT filled in]\"\n    )\n+\n+   // 2 DYNAMIC AGENTS (task-specific)\n+   Task(\n+     subagent_type=\"general-purpose\",\n+     description=\"[DYNAMIC PERSPECTIVE 1] perspective\",\n+     model=\"opus\",\n+     prompt=\"[PASTE HEAVY'S DYNAMIC AGENT TEMPLATE with ROLE and TASK filled in]\"\n+   )\n+\n+   Task(\n+     subagent_type=\"general-purpose\",\n+     description=\"[DYNAMIC PERSPECTIVE 2] perspective\",\n+     model=\"opus\",\n+     prompt=\"[PASTE HEAVY'S DYNAMIC AGENT TEMPLATE with ROLE and TASK filled in]\"\n+   )\n    ```\n \n 5. **Synthesize the agents' responses**:\n \n-After both agents return, synthesize their insights:\n+After all 4 agents return, synthesize their insights:\n \n ```\n TRADEOFF: [topic]\n - First Principles: Delete X because [reason]\n - AGI-Pilled: Expand Y because [capability argument]\n+- [Dynamic 1]: Consider Z because [domain expertise]\n+- [Dynamic 2]: Watch out for W because [specific risk]\n - Resolution: [chosen approach with rationale]\n ```\n \n@@ -297,23 +325,30 @@ TRADEOFF: [topic]\n \n 7. **Call `ExitPlanMode`**\n \n-### Why These 2 Agents?\n+### Why 4 Agents?\n+\n+Lite Heavy uses **4 agents** to cover both universal tensions and task-specific blind spots:\n \n-Lite Heavy uses `/heavy`'s two **required** agents because they represent complementary forces:\n+| Agent Type | Force | Key Question | Enforcement |\n+|------------|-------|--------------|-------------|\n+| **First Principles** | Simplification | \"What can be deleted?\" | Hook-enforced |\n+| **AGI-Pilled** | Capability | \"What would god-tier AI do?\" | Hook-enforced |\n+| **Dynamic 1** | Domain expertise | \"What does [expert] see?\" | Documentation |\n+| **Dynamic 2** | Adversarial review | \"What could go wrong?\" | Documentation |\n \n-| Agent | Force | Key Question |\n-|-------|-------|--------------|\n-| **First Principles** | Simplification | \"What can be deleted? What's over-engineered?\" |\n-| **AGI-Pilled** | Capability | \"What would god-tier AI implementation look like?\" |\n+| Problem | Which Agent Catches It |\n+|---------|----------------------|\n+| Over-engineering | First Principles |\n+| Under-ambition | AGI-Pilled |\n+| Domain-specific pitfalls | Dynamic (domain expert) |\n+| Implementation flaws | Dynamic (adversarial) |\n \n-| Without Lite Heavy | With Lite Heavy |\n-|-------------------|-----------------|\n-| Over-engineering | First Principles asks \"delete this?\" |\n-| Under-ambition | AGI-Pilled asks \"why constrain the model?\" |\n-| Scope creep | First Principles enforces simplicity |\n-| Conservative design | AGI-Pilled pushes for intelligence-maximizing |\n+**Why 4 agents instead of 2?**\n+- 2 agents = 1 pairwise tension (simplify vs expand)\n+- 4 agents = 6 pairwise tensions (each perspective challenges 3 others)\n+- Planning tokens << execution tokens \u2014 better planning = fewer fix-verify iterations\n \n-**Why only 2 agents?** More agents add latency without proportional value for implementation planning. `/heavy` uses 5+ agents for strategic questions; `/forge` uses the 2 required agents for execution planning.\n+**Hook enforcement**: Only the 2 required agents are hook-enforced. Dynamic agents are guided by documentation \u2014 the hooks enforce\n\n... [truncated - diff too long]\n\nINSTRUCTIONS:\n- Only update docs that are actually affected by this change\n- Keep updates concise and accurate\n- Don't add unnecessary documentation\n- If the change is purely code (no architectural/API changes), you may skip doc updates\n- Focus on: API changes, new features, architectural decisions, configuration changes\n\nUse the /heavy skill if you need multiple perspectives on what to document.\n"
}