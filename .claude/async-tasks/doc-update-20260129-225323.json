{
  "type": "doc-update",
  "created_at": "2026-01-29T22:53:23.654562+00:00",
  "status": "pending",
  "commit_message": "fix(hooks): remove permissionDecisionReason from allow decisions\n\nClaude Code treats permissionDecisionReason as an error/block message\nregardless of the permissionDecision value. This caused the bizarre\nerror \"Error: Auto-approved by appfix mode\" to appear when auto-approval\nwas actually working correctly.\n\nThe fix removes the reason field for allow decisions. The field should\nonly be used with deny decisions (as done correctly in plan-mode-enforcer.py).\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
  "diff_content": "commit df4fb9b2e3e65f770eadd20fecb217ec51e1140a\nAuthor: olivier-motium <243932812+olivier-motium@users.noreply.github.com>\nDate:   Thu Jan 29 23:53:23 2026 +0100\n\n    fix(hooks): remove permissionDecisionReason from allow decisions\n    \n    Claude Code treats permissionDecisionReason as an error/block message\n    regardless of the permissionDecision value. This caused the bizarre\n    error \"Error: Auto-approved by appfix mode\" to appear when auto-approval\n    was actually working correctly.\n    \n    The fix removes the reason field for allow decisions. The field should\n    only be used with deny decisions (as done correctly in plan-mode-enforcer.py).\n    \n    Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n---\n config/hooks/pretooluse-auto-approve.py | 4 +++-\n 1 file changed, 3 insertions(+), 1 deletion(-)\n\ndiff --git a/config/hooks/pretooluse-auto-approve.py b/config/hooks/pretooluse-auto-approve.py\nindex 13444c8..fc6715e 100755\n--- a/config/hooks/pretooluse-auto-approve.py\n+++ b/config/hooks/pretooluse-auto-approve.py\n@@ -95,11 +95,13 @@ def main():\n \n     # Auto-approve the tool using PreToolUse decision control\n     # This returns permissionDecision: \"allow\" which bypasses the permission system\n+    # NOTE: Do NOT include permissionDecisionReason for allow decisions - Claude Code\n+    # treats any permissionDecisionReason as an error/block message regardless of\n+    # the permissionDecision value\n     output = {\n         \"hookSpecificOutput\": {\n             \"hookEventName\": \"PreToolUse\",\n             \"permissionDecision\": \"allow\",\n-            \"permissionDecisionReason\": f\"Auto-approved by {state_type} mode\",\n         }\n     }",
  "existing_docs": [
    "docs/architecture.md",
    "docs/index.md",
    "docs/philosophy.md",
    "README.md",
    ".claude/MEMORIES.md"
  ],
  "instructions": "\nDOCUMENTATION UPDATE TASK\n\nA commit was just made in an appfix/godo session. Your job is to:\n\n1. Analyze the diff to understand what changed\n2. Determine which documentation files need updating\n3. Update the relevant docs to reflect the changes\n\nCOMMIT MESSAGE:\nfix(hooks): remove permissionDecisionReason from allow decisions\n\nClaude Code treats permissionDecisionReason as an error/block message\nregardless of the permissionDecision value. This caused the bizarre\nerror \"Error: Auto-approved by appfix mode\" to appear when auto-approval\nwas actually working correctly.\n\nThe fix removes the reason field for allow decisions. The field should\nonly be used with deny decisions (as done correctly in plan-mode-enforcer.py).\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n\nEXISTING DOCUMENTATION FILES:\n- docs/architecture.md\n- docs/index.md\n- docs/philosophy.md\n- README.md\n- .claude/MEMORIES.md\n\nDIFF CONTENT:\ncommit df4fb9b2e3e65f770eadd20fecb217ec51e1140a\nAuthor: olivier-motium <243932812+olivier-motium@users.noreply.github.com>\nDate:   Thu Jan 29 23:53:23 2026 +0100\n\n    fix(hooks): remove permissionDecisionReason from allow decisions\n    \n    Claude Code treats permissionDecisionReason as an error/block message\n    regardless of the permissionDecision value. This caused the bizarre\n    error \"Error: Auto-approved by appfix mode\" to appear when auto-approval\n    was actually working correctly.\n    \n    The fix removes the reason field for allow decisions. The field should\n    only be used with deny decisions (as done correctly in plan-mode-enforcer.py).\n    \n    Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n---\n config/hooks/pretooluse-auto-approve.py | 4 +++-\n 1 file changed, 3 insertions(+), 1 deletion(-)\n\ndiff --git a/config/hooks/pretooluse-auto-approve.py b/config/hooks/pretooluse-auto-approve.py\nindex 13444c8..fc6715e 100755\n--- a/config/hooks/pretooluse-auto-approve.py\n+++ b/config/hooks/pretooluse-auto-approve.py\n@@ -95,11 +95,13 @@ def main():\n \n     # Auto-approve the tool using PreToolUse decision control\n     # This returns permissionDecision: \"allow\" which bypasses the permission system\n+    # NOTE: Do NOT include permissionDecisionReason for allow decisions - Claude Code\n+    # treats any permissionDecisionReason as an error/block message regardless of\n+    # the permissionDecision value\n     output = {\n         \"hookSpecificOutput\": {\n             \"hookEventName\": \"PreToolUse\",\n             \"permissionDecision\": \"allow\",\n-            \"permissionDecisionReason\": f\"Auto-approved by {state_type} mode\",\n         }\n     }\n\nINSTRUCTIONS:\n- Only update docs that are actually affected by this change\n- Keep updates concise and accurate\n- Don't add unnecessary documentation\n- If the change is purely code (no architectural/API changes), you may skip doc updates\n- Focus on: API changes, new features, architectural decisions, configuration changes\n\nUse the /heavy skill if you need multiple perspectives on what to document.\n"
}