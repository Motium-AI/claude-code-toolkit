{
  "type": "doc-update",
  "created_at": "2026-01-30T12:46:19.877385+00:00",
  "status": "pending",
  "commit_message": "feat(skills): add harness-test skill for testing toolkit changes in sandbox\n\nCreates isolated sandbox environment for testing hooks, skills, and settings\nchanges before committing. Key features:\n\n- Creates sandbox with modified hooks symlinked from project (not ~/.claude/)\n- Propagates uncommitted changes to sandbox worktree\n- Runs test cases in fresh Claude session to verify hook behavior\n- Integrates with /forge as Phase 1.75 (conditional for toolkit project)\n\nIncludes 4 test cases:\n- plan-mode-enforcer-blocks-code-write\n- plan-mode-enforcer-allows-claude-dir\n- skill-state-initializer-forge\n- auto-approval-in-forge-mode\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>",
  "diff_content": "commit ed04ff57d85cd2ae3119dff655a9abb33dbf7c07\nAuthor: olivier-motium <243932812+olivier-motium@users.noreply.github.com>\nDate:   Fri Jan 30 13:46:19 2026 +0100\n\n    feat(skills): add harness-test skill for testing toolkit changes in sandbox\n    \n    Creates isolated sandbox environment for testing hooks, skills, and settings\n    changes before committing. Key features:\n    \n    - Creates sandbox with modified hooks symlinked from project (not ~/.claude/)\n    - Propagates uncommitted changes to sandbox worktree\n    - Runs test cases in fresh Claude session to verify hook behavior\n    - Integrates with /forge as Phase 1.75 (conditional for toolkit project)\n    \n    Includes 4 test cases:\n    - plan-mode-enforcer-blocks-code-write\n    - plan-mode-enforcer-allows-claude-dir\n    - skill-state-initializer-forge\n    - auto-approval-in-forge-mode\n    \n    Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n---\n config/commands/harness-test.md                    |  33 +++\n config/skills/forge/SKILL.md                       |  56 ++++-\n config/skills/harness-test/SKILL.md                | 259 +++++++++++++++++++++\n .../harness-test/references/test-case-schema.md    | 210 +++++++++++++++++\n .../skills/harness-test/scripts/cleanup-sandbox.sh |  59 +++++\n .../harness-test/scripts/detect-harness-changes.sh |  57 +++++\n .../skills/harness-test/scripts/detect-harness.sh  |  65 ++++++\n .../harness-test/scripts/propagate-changes.sh      |  54 +++++\n .../skills/harness-test/scripts/run-all-tests.sh   | 166 +++++++++++++\n .../skills/harness-test/scripts/run-test-case.sh   | 228 ++++++++++++++++++\n .../harness-test/scripts/setup-harness-sandbox.sh  | 250 ++++++++++++++++++++\n .../test-cases/auto-approval-in-forge-mode.json    |  26 +++\n .../plan-mode-enforcer-allows-claude-dir.json      |  22 ++\n .../plan-mode-enforcer-blocks-code-write.json      |  29 +++\n .../test-cases/skill-state-initializer-forge.json  |  21 ++\n docs/index.md                                      |   6 +-\n 16 files changed, 1537 insertions(+), 4 deletions(-)\n\ndiff --git a/config/commands/harness-test.md b/config/commands/harness-test.md\nnew file mode 100644\nindex 0000000..c753024\n--- /dev/null\n+++ b/config/commands/harness-test.md\n@@ -0,0 +1,33 @@\n+---\n+description: Test harness changes in isolated sandbox\n+argument-hint: [--test <name>] [--interactive] [--keep-sandbox]\n+---\n+\n+# /harness-test\n+\n+Test changes to Claude Code hooks, skills, and settings in an isolated sandbox before committing.\n+\n+## Arguments\n+\n+- `--test <name>` - Run a specific test case\n+- `--interactive` - Open tmux for manual observation\n+- `--keep-sandbox` - Don't destroy sandbox after tests\n+- `--all` - Run all test cases, not just relevant ones\n+\n+## Instructions\n+\n+1. **Read the harness-test skill**:\n+   @~/.claude/skills/harness-test/SKILL.md\n+\n+2. **Execute the workflow**:\n+   Follow the phases in the skill document:\n+   - Phase 1: Detect harness project and changes\n+   - Phase 2: Setup sandbox with modified hooks\n+   - Phase 3: Propagate uncommitted changes\n+   - Phase 4: Run test cases\n+   - Phase 5: Report results and cleanup\n+\n+3. **Handle results**:\n+   - If all tests pass, report success\n+   - If tests fail, report which tests failed and why\n+   - Write results to `.claude/harness-test-state.json`\ndiff --git a/config/skills/forge/SKILL.md b/config/skills/forge/SKILL.md\nindex ec6f920..acbcf2b 100644\n--- a/config/skills/forge/SKILL.md\n+++ b/config/skills/forge/SKILL.md\n@@ -161,6 +161,18 @@ Before stopping, you MUST create `.claude/completion-checkpoint.json`:\n \u2502  PHASE 1: EXECUTE                                               \u2502\n \u2502     \u2514\u2500\u25ba Make code changes                                       \u2502\n \u2502     \u2514\u2500\u25ba Run linters, fix ALL errors                             \u2502\n+\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n+\u2502  \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557  \u2502\n+\u2502  \u2551  PHASE 1.75: HARNESS TEST (if in toolkit project)         \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba Detect if cwd is claude-code-toolkit              \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba Check for modified hooks/skills/settings          \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba Create sandbox, propagate changes                 \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba Run test cases in isolated Claude session         \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba BLOCK if tests fail, continue if pass             \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba See: /harness-test skill                          \u2551  \u2502\n+\u2502  \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d  \u2502\n+\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n+\u2502  PHASE 1.9: COMMIT & DEPLOY                                     \u2502\n \u2502     \u2514\u2500\u25ba Commit and push                                         \u2502\n \u2502     \u2514\u2500\u25ba Deploy                                                  \u2502\n \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n@@ -428,13 +440,53 @@ Use Edit tool for targeted changes. Keep changes focused on the task.\n - \"This was broken before we started\"\n - \"I'll fix this in a separate PR\"\n \n-### 1.3 Commit and Push\n+## Phase 1.75: Harness Test (Conditional)\n+\n+**This phase only runs when working on the claude-code-toolkit repository itself.**\n+\n+When modifying hooks, skills, or settings, changes don't take effect in the current session (hooks are captured at startup). This phase tests those changes in an isolated sandbox with a fresh Claude session.\n+\n+### Detection\n+\n+```bash\n+# Check if we're in the harness project\n+~/.claude/skills/harness-test/scripts/detect-harness.sh\n+\n+# Check for modified harness files\n+~/.claude/skills/harness-test/scripts/detect-harness-changes.sh\n+```\n+\n+If both return true, run harness tests before committing.\n+\n+### Execution\n+\n+```bash\n+# Create sandbox with modified hooks/skills\n+SANDBOX_ID=$(~/.claude/skills/harness-test/scripts/setup-harness-sandbox.sh)\n+\n+# Run test cases\n+~/.claude/skills/harness-test/scripts/run-all-tests.sh \"$SANDBOX_ID\"\n+\n+# Cleanup\n+~/.claude/skills/harness-test/scripts/cleanup-sandbox.sh \"$SANDBOX_ID\"\n+```\n+\n+### Blocking Behavior\n+\n+- **Tests pass**: Continue to Phase 1.9 (commit)\n+- **Tests fail**: STOP. Fix the issues and re-run. Do NOT commit broken hooks.\n+\n+See `/harness-test` skill for full documentation.\n+\n+## Phase 1.9: Commit and Deploy\n+\n+### 1.9.1 Commit and Push\n ```bash\n git add <specific files> && git commit -m \"feat: [description]\"\n git push\n ```\n \n-### 1.4 Deploy\n+### 1.9.2 Deploy\n ```bash\n gh workflow run deploy.yml -f environment=staging\n gh run watch --exit-status\ndiff --git a/config/skills/harness-test/SKILL.md b/config/skills/harness-test/SKILL.md\nnew file mode 100644\nindex 0000000..1cae687\n--- /dev/null\n+++ b/config/skills/harness-test/SKILL.md\n@@ -0,0 +1,259 @@\n+---\n+name: harness-test\n+description: Test Claude Code harness changes (hooks, skills, settings) in isolated sandbox. Auto-triggers in /forge when modifying toolkit. Use \"/harness-test\" or \"test harness changes\".\n+---\n+\n+# Harness Test Skill (/harness-test)\n+\n+Test changes to Claude Code hooks, skills, and settings in an isolated sandbox before committing.\n+\n+## Why This Exists\n+\n+**Hooks are captured at Claude session startup.**\n+\n+When you modify a hook in the current session, the changes don't take effect until restart. Testing hook changes requires starting a NEW Claude session with the modified hooks loaded.\n+\n+This skill:\n+1. Creates an isolated sandbox\n+2. Copies your uncommitted changes to the sandbox\n+3. Starts a fresh Claude session in the sandbox\n+4. Runs test prompts to verify expected behavior\n+5. Reports pass/fail back to the parent session\n+\n+## Triggers\n+\n+- `/harness-test` - explicit invocation\n+- Auto-triggered by `/forge` when:\n+  1. Working in claude-code-toolkit repository\n+  2. Modified files include harness files (hooks, skills, settings)\n+\n+## Integration with /forge\n+\n+When `/forge` is active in the toolkit repository:\n+\n+```\n+PHASE 1: EXECUTE (make code changes to hooks/skills)\n+\n+\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n+\u2551  PHASE 1.75: HARNESS TEST (automatic)        \n\n... [truncated - diff too long]",
  "existing_docs": [
    "docs/architecture.md",
    "docs/index.md",
    "docs/philosophy.md",
    "README.md",
    ".claude/MEMORIES.md"
  ],
  "instructions": "\nDOCUMENTATION UPDATE TASK\n\nA commit was just made in an appfix/godo session. Your job is to:\n\n1. Analyze the diff to understand what changed\n2. Determine which documentation files need updating\n3. Update the relevant docs to reflect the changes\n\nCOMMIT MESSAGE:\nfeat(skills): add harness-test skill for testing toolkit changes in sandbox\n\nCreates isolated sandbox environment for testing hooks, skills, and settings\nchanges before committing. Key features:\n\n- Creates sandbox with modified hooks symlinked from project (not ~/.claude/)\n- Propagates uncommitted changes to sandbox worktree\n- Runs test cases in fresh Claude session to verify hook behavior\n- Integrates with /forge as Phase 1.75 (conditional for toolkit project)\n\nIncludes 4 test cases:\n- plan-mode-enforcer-blocks-code-write\n- plan-mode-enforcer-allows-claude-dir\n- skill-state-initializer-forge\n- auto-approval-in-forge-mode\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n\nEXISTING DOCUMENTATION FILES:\n- docs/architecture.md\n- docs/index.md\n- docs/philosophy.md\n- README.md\n- .claude/MEMORIES.md\n\nDIFF CONTENT:\ncommit ed04ff57d85cd2ae3119dff655a9abb33dbf7c07\nAuthor: olivier-motium <243932812+olivier-motium@users.noreply.github.com>\nDate:   Fri Jan 30 13:46:19 2026 +0100\n\n    feat(skills): add harness-test skill for testing toolkit changes in sandbox\n    \n    Creates isolated sandbox environment for testing hooks, skills, and settings\n    changes before committing. Key features:\n    \n    - Creates sandbox with modified hooks symlinked from project (not ~/.claude/)\n    - Propagates uncommitted changes to sandbox worktree\n    - Runs test cases in fresh Claude session to verify hook behavior\n    - Integrates with /forge as Phase 1.75 (conditional for toolkit project)\n    \n    Includes 4 test cases:\n    - plan-mode-enforcer-blocks-code-write\n    - plan-mode-enforcer-allows-claude-dir\n    - skill-state-initializer-forge\n    - auto-approval-in-forge-mode\n    \n    Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\n---\n config/commands/harness-test.md                    |  33 +++\n config/skills/forge/SKILL.md                       |  56 ++++-\n config/skills/harness-test/SKILL.md                | 259 +++++++++++++++++++++\n .../harness-test/references/test-case-schema.md    | 210 +++++++++++++++++\n .../skills/harness-test/scripts/cleanup-sandbox.sh |  59 +++++\n .../harness-test/scripts/detect-harness-changes.sh |  57 +++++\n .../skills/harness-test/scripts/detect-harness.sh  |  65 ++++++\n .../harness-test/scripts/propagate-changes.sh      |  54 +++++\n .../skills/harness-test/scripts/run-all-tests.sh   | 166 +++++++++++++\n .../skills/harness-test/scripts/run-test-case.sh   | 228 ++++++++++++++++++\n .../harness-test/scripts/setup-harness-sandbox.sh  | 250 ++++++++++++++++++++\n .../test-cases/auto-approval-in-forge-mode.json    |  26 +++\n .../plan-mode-enforcer-allows-claude-dir.json      |  22 ++\n .../plan-mode-enforcer-blocks-code-write.json      |  29 +++\n .../test-cases/skill-state-initializer-forge.json  |  21 ++\n docs/index.md                                      |   6 +-\n 16 files changed, 1537 insertions(+), 4 deletions(-)\n\ndiff --git a/config/commands/harness-test.md b/config/commands/harness-test.md\nnew file mode 100644\nindex 0000000..c753024\n--- /dev/null\n+++ b/config/commands/harness-test.md\n@@ -0,0 +1,33 @@\n+---\n+description: Test harness changes in isolated sandbox\n+argument-hint: [--test <name>] [--interactive] [--keep-sandbox]\n+---\n+\n+# /harness-test\n+\n+Test changes to Claude Code hooks, skills, and settings in an isolated sandbox before committing.\n+\n+## Arguments\n+\n+- `--test <name>` - Run a specific test case\n+- `--interactive` - Open tmux for manual observation\n+- `--keep-sandbox` - Don't destroy sandbox after tests\n+- `--all` - Run all test cases, not just relevant ones\n+\n+## Instructions\n+\n+1. **Read the harness-test skill**:\n+   @~/.claude/skills/harness-test/SKILL.md\n+\n+2. **Execute the workflow**:\n+   Follow the phases in the skill document:\n+   - Phase 1: Detect harness project and changes\n+   - Phase 2: Setup sandbox with modified hooks\n+   - Phase 3: Propagate uncommitted changes\n+   - Phase 4: Run test cases\n+   - Phase 5: Report results and cleanup\n+\n+3. **Handle results**:\n+   - If all tests pass, report success\n+   - If tests fail, report which tests failed and why\n+   - Write results to `.claude/harness-test-state.json`\ndiff --git a/config/skills/forge/SKILL.md b/config/skills/forge/SKILL.md\nindex ec6f920..acbcf2b 100644\n--- a/config/skills/forge/SKILL.md\n+++ b/config/skills/forge/SKILL.md\n@@ -161,6 +161,18 @@ Before stopping, you MUST create `.claude/completion-checkpoint.json`:\n \u2502  PHASE 1: EXECUTE                                               \u2502\n \u2502     \u2514\u2500\u25ba Make code changes                                       \u2502\n \u2502     \u2514\u2500\u25ba Run linters, fix ALL errors                             \u2502\n+\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n+\u2502  \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557  \u2502\n+\u2502  \u2551  PHASE 1.75: HARNESS TEST (if in toolkit project)         \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba Detect if cwd is claude-code-toolkit              \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba Check for modified hooks/skills/settings          \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba Create sandbox, propagate changes                 \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba Run test cases in isolated Claude session         \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba BLOCK if tests fail, continue if pass             \u2551  \u2502\n+\u2502  \u2551     \u2514\u2500\u25ba See: /harness-test skill                          \u2551  \u2502\n+\u2502  \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d  \u2502\n+\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n+\u2502  PHASE 1.9: COMMIT & DEPLOY                                     \u2502\n \u2502     \u2514\u2500\u25ba Commit and push                                         \u2502\n \u2502     \u2514\u2500\u25ba Deploy                                                  \u2502\n \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n@@ -428,13 +440,53 @@ Use Edit tool for targeted changes. Keep changes focused on the task.\n - \"This was broken before we started\"\n - \"I'll fix this in a separate PR\"\n \n-### 1.3 Commit and Push\n+## Phase 1.75: Harness Test (Conditional)\n+\n+**This phase only runs when working on the claude-code-toolkit repository itself.**\n+\n+When modifying hooks, skills, or settings, changes don't take effect in the current session (hooks are captured at startup). This phase tests those changes in an isolated sandbox with a fresh Claude session.\n+\n+### Detection\n+\n+```bash\n+# Check if we're in the harness project\n+~/.claude/skills/harness-test/scripts/detect-harness.sh\n+\n+# Check for modified harness files\n+~/.claude/skills/harness-test/scripts/detect-harness-changes.sh\n+```\n+\n+If both return true, run harness tests before committing.\n+\n+### Execution\n+\n+```bash\n+# Create sandbox with modified hooks/skills\n+SANDBOX_ID=$(~/.claude/skills/harness-test/scripts/setup-harness-sandbox.sh)\n+\n+# Run test cases\n+~/.claude/skills/harness-test/scripts/run-all-tests.sh \"$SANDBOX_ID\"\n+\n+# Cleanup\n+~/.claude/skills/harness-test/scripts/cleanup-sandbox.sh \"$SANDBOX_ID\"\n+```\n+\n+### Blocking Behavior\n+\n+- **Tests pass**: Continue to Phase 1.9 (commit)\n+- **Tests fail**: STOP. Fix the issues and re-run. Do NOT commit broken hooks.\n+\n+See `/harness-test` skill for full documentation.\n+\n+## Phase 1.9: Commit and Deploy\n+\n+### 1.9.1 Commit and Push\n ```bash\n git add <specific files> && git commit -m \"feat: [description]\"\n git push\n ```\n \n-### 1.4 Deploy\n+### 1.9.2 Deploy\n ```bash\n gh workflow run deploy.yml -f environment=staging\n gh run watch --exit-status\ndiff --git a/config/skills/harness-test/SKILL.md b/config/skills/harness-test/SKILL.md\nnew file mode 100644\nindex 0000000..1cae687\n--- /dev/null\n+++ b/config/skills/harness-test/SKILL.md\n@@ -0,0 +1,259 @@\n+---\n+name: harness-test\n+description: Test Claude Code harness changes (hooks, skills, settings) in isolated sandbox. Auto-triggers in /forge when modifying toolkit. Use \"/harness-test\" or \"test harness changes\".\n+---\n+\n+# Harness Test Skill (/harness-test)\n+\n+Test changes to Claude Code hooks, skills, and settings in an isolated sandbox before committing.\n+\n+## Why This Exists\n+\n+**Hooks are captured at Claude session startup.**\n+\n+When you modify a hook in the current session, the changes don't take effect until restart. Testing hook changes requires starting a NEW Claude session with the modified hooks loaded.\n+\n+This skill:\n+1. Creates an isolated sandbox\n+2. Copies your uncommitted changes to the sandbox\n+3. Starts a fresh Claude session in the sandbox\n+4. Runs test prompts to verify expected behavior\n+5. Reports pass/fail back to the parent session\n+\n+## Triggers\n+\n+- `/harness-test` - explicit invocation\n+- Auto-triggered by `/forge` when:\n+  1. Working in claude-code-toolkit repository\n+  2. Modified files include harness files (hooks, skills, settings)\n+\n+## Integration with /forge\n+\n+When `/forge` is active in the toolkit repository:\n+\n+```\n+PHASE 1: EXECUTE (make code changes to hooks/skills)\n+\n+\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n+\u2551  PHASE 1.75: HARNESS TEST (automatic)        \n\n... [truncated - diff too long]\n\nINSTRUCTIONS:\n- Only update docs that are actually affected by this change\n- Keep updates concise and accurate\n- Don't add unnecessary documentation\n- If the change is purely code (no architectural/API changes), you may skip doc updates\n- Focus on: API changes, new features, architectural decisions, configuration changes\n\nUse the /heavy skill if you need multiple perspectives on what to document.\n"
}