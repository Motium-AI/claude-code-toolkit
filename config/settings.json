{
  "env": {
    "CLAUDE_CODE_MAX_OUTPUT_TOKENS": "128000",
    "ENABLE_TOOL_SEARCH": "auto",
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  },
  "permissions": {
    "defaultMode": "dontAsk"
  },
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/auto-update.py\"",
            "timeout": 45
          },
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/session-init.py\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/compound-context-loader.py\"",
            "timeout": 15
          },
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/read-docs-reminder.py\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "compact",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/auto-update.py\"",
            "timeout": 45
          },
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/session-init.py\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/compound-context-loader.py\"",
            "timeout": 15
          },
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/read-docs-reminder.py\"",
            "timeout": 5
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/stop-validator.py\"",
            "timeout": 10
          },
          {
            "type": "agent",
            "prompt": "You verify that a Claude Code session's completion checkpoint honestly represents the work done.\n\nHook input: $ARGUMENTS\n\nFAST PATH: Use Bash to check if autonomous mode is active:\n  test -f \"{cwd}/.claude/autonomous-state.json\" && echo AUTONOMOUS || echo CASUAL\nIf CASUAL (no autonomous state), return {\"ok\": true} immediately â€” casual sessions don't need quality evaluation.\n\nAUTONOMOUS EVALUATION:\n1. Read the checkpoint: {cwd}/.claude/completion-checkpoint.json\n2. Sample the transcript ending (use Bash): tail -150 \"{transcript_path}\"\n3. Evaluate THREE things:\n   a) Does what_was_done match actual tool calls visible in the transcript? (Look for Edit, Write, Bash with git commands). Claiming work that never happened = block.\n   b) Is key_insight a genuine transferable lesson, or just restating what_was_done? A lesson teaches something reusable. A restatement just says what happened.\n   c) Are there unresolved errors, acknowledged TODOs, or 'I will do this later' in the transcript tail? If the agent left obvious work unfinished, block.\n\nRETURN {\"ok\": true} if the checkpoint is honest, or {\"ok\": false, \"reason\": \"specific actionable feedback\"} if clearly dishonest or incomplete.\n\nRules: Be pragmatic. Minor omissions are fine. Block ONLY for clear problems. If in doubt, allow. Keep evaluation under 5 tool calls.",
            "timeout": 90
          }
        ]
      }
    ],
    "SessionEnd": [],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/precompact-capture.py\"",
            "timeout": 15
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/auto-approve.py\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/deploy-enforcer.py\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "bash \"$HOME/.claude/hooks/azure-command-guard.sh\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "WebSearch",
        "hooks": [
          {
            "type": "command",
            "command": "python3 ~/.claude/hooks/exa-search-enforcer.py",
            "timeout": 5
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/tool-usage-logger.py\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Read",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/memory-recall.py\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Grep",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/memory-recall.py\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Glob",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/memory-recall.py\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/bash-version-tracker.py\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/doc-updater-async.py\"",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "Skill",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/skill-continuation-reminder.py\"",
            "timeout": 5
          }
        ]
      }
    ],
    "SubagentStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/subagent-exa-enforcer.py\"",
            "timeout": 5
          }
        ]
      }
    ],
    "SubagentStop": [],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/read-docs-trigger.py\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/prompt-entity-recall.py\"",
            "timeout": 5
          }
        ]
      }
    ],
    "PermissionRequest": [
      {
        "matcher": "ExitPlanMode",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/plan-auto-approve.py\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "python3 \"$HOME/.claude/hooks/auto-approve.py\"",
            "timeout": 5
          }
        ]
      }
    ]
  },
  "alwaysThinkingEnabled": true
}
